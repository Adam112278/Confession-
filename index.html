<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Confession ðŸ’Œ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",Arial,sans-serif;}
body{height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#ff9a9e,#fad0c4);animation:fadeIn 1.5s ease forwards;cursor:pointer;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
.box{background:#fff;padding:30px 38px;border-radius:18px;max-width:520px;text-align:center;font-size:18px;line-height:1.8;color:#333;box-shadow:0 18px 40px rgba(0,0,0,0.25);opacity:0;transform:scale(0.9);animation:boxIn 1.2s ease forwards;animation-delay:1s;}
@keyframes boxIn{to{opacity:1;transform:scale(1);}}
.final{font-size:22px;font-weight:600;color:#ff5c8a;animation:heartZoom 1.5s ease-in-out infinite alternate;}
@keyframes heartZoom{from{transform:scale(1);}to{transform:scale(1.08);}}
.cursor{display:inline-block;width:2px;height:1em;background:#333;margin-left:4px;animation:blink 1s infinite;vertical-align:bottom;}
@keyframes blink{0%,50%,100%{opacity:1;}25%,75%{opacity:0;}}
</style>
</head>
<body>
<div class="box">
    <span id="text"></span><span id="cursor" class="cursor"></span>
</div>
<audio id="music" loop preload="auto">
    <source src="./in-love.mp3" type="audio/mpeg">
</audio>

<script>
// ========== KIá»‚M TRA NHáº C ==========
console.log("ðŸ”Š Kiá»ƒm tra file nháº¡c...");

const messages = [
    "CÃ³ thá»ƒ cáº­u khÃ´ng biáº¿t, nhÆ°ng mÃ¬nh Ä‘Ã£ suy nghÄ© ráº¥t lÃ¢u trÆ°á»›c khi viáº¿t nhá»¯ng dÃ²ng nÃ y.",
    "Má»—i láº§n nÃ³i chuyá»‡n vá»›i cáº­u, mÃ¬nh Ä‘á»u cáº£m tháº¥y vui hÆ¡n má»™t chÃºt.",
    "MÃ¬nh thÃ­ch cÃ¡ch cáº­u cÆ°á»i, cÃ¡ch cáº­u quan tÃ¢m má»i ngÆ°á»i xung quanh.",
    "VÃ  tháº­t lÃ²ng thÃ¬â€¦",
    "MÃ¬nh thÃ­ch cáº­u ðŸ’—"
];
const typeSpeed = 65, deleteSpeed = 35, pauseTime = 1800;
let msgIndex = 0, charIndex = 0, deleting = false;
const textEl = document.getElementById("text"), cursorEl = document.getElementById("cursor"), music = document.getElementById("music");

// Auto-play music vá»›i Ã¢m lÆ°á»£ng tháº¥p
music.volume = 0.3;
setTimeout(() => {
    music.play().catch(() => {
        // Náº¿u bá»‹ cháº·n, sáº½ phÃ¡t khi user tÆ°Æ¡ng tÃ¡c
        document.body.addEventListener('click', () => music.play(), { once: true });
    });
}, 500);

function typingEffect(){
    const current = messages[msgIndex];
    if(msgIndex === messages.length - 1){
        if(charIndex < current.length){
            textEl.textContent += current.charAt(charIndex);
            charIndex++;
            setTimeout(typingEffect, typeSpeed);
        }else{
            textEl.classList.add("final");
            cursorEl.style.display = "none";
        }
        return;
    }
    if(!deleting && charIndex < current.length){
        textEl.textContent += current.charAt(charIndex);
        charIndex++;
        setTimeout(typingEffect, typeSpeed);
    }else if(!deleting && charIndex === current.length){
        setTimeout(() => deleting = true, pauseTime);
        setTimeout(typingEffect, pauseTime);
    }else if(deleting && charIndex > 0){
        textEl.textContent = current.substring(0, charIndex - 1);
        charIndex--;
        setTimeout(typingEffect, deleteSpeed);
    }else if(deleting && charIndex === 0){
        deleting = false;
        msgIndex++;
        setTimeout(typingEffect, 500);
    }
}
setTimeout(typingEffect, 2200);
</script>
</body>
</html>
